{% extends "base.html" %}
{% load static %}
{% block metadescription %}
    {{ product.description|truncatewords:155 }}
{% endblock %}
{% block title %}
    {{ product.name }}
{% endblock %}
{% block content %}
<div class ="row my_prod_row_class">
    <div class="container">
        <br>
        <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
                <div>
                    <img  src="{{product.image.url}}" alt="{{product.name}}">
                </div>
            </div>
            <div class="text-light col-12 col-sm-12 col-md-12 col-lg-6">
                <div>
                    <h1>{{product.name}}</h1>
                    <p>â‚¬{{product.price}}</p>
                    <p>{{product.description}}</p>
                    {% if product.stock == 0%}
                    <p><b>Out of Stock</b></p>
                    {% else %}
                    <a class ="btn btn-secondary" href="{% url 'cart:add_cart' product.id %}">Add to Cart</a>
                    {% endif %}
                    
                    <div class = "form-group">
                        <h3>Reviews</h3>
                        {% for r in reviews %}
                        <div class="text-light">
                            <a href=# class="">{{r.user.username|title}}</a>
                            <div>
                                <p >{{r.review}}</p>
                                

                            </div>
                        </div>
                        {% endfor %}
                        <div>
                            <form method="post" class="mt-4">
                            {% csrf_token %}

                            {% for field in form %}
                                <div class="mb-3 d-flex justify-content-between">
                                    {{field.label_tag}}
                                    {{field}}
                                    {% if field.errors %}
                                        <small class="text-danger">{{ field.errors|join:", " }}</small>
                                    {% endif %}
                             </div>  
                            {% endfor %}
                            <button type="submit" class="btn btn-primary">Submit Review</button>
                        </form>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}